<div class="col-12 py-0 px-1">
  <div class="personal-queja card mb-3 pb-0">
    <div class="card-header d-flex justify-content-between align-items-center">
      <div class="d-flex justify-content-center align-items-center">
        <a href="#" (click)="onRelevance($event)" class="ml-1 p-1 btn btn-sm btn-info no-border-button" [ngClass]="{ 'dark': queja.user_relevance }"
          title="Apoyo">
          <fa name="star"></fa>
        </a>
        <a href="#" class="ml-1 p-1 btn btn-sm btn-info no-border-button" title="Comentar">
          <fa name="pencil"></fa>
        </a>
        <a href="#" (click)="geolocatePub($event)" class="ml-1 p-1 btn btn-sm btn-info no-border-button" title="Geolocalizar">
          <fa name="map-marker"></fa>
        </a>
        <a href="#" class="ml-1 p-1 btn btn-sm btn-info no-border-button" title="Denunciar">
          <fa name="ban"></fa>
        </a>
      </div>
      <div>
        <small>{{queja.date_pub}}</small>
      </div>
    </div>
    <div class="personal-usr-queja py-0 card-block d-flex justify-content-end align-items-center">
      {{queja.user.person.name}} {{queja.user.person.last_name}}
      <div class="ml-2 my-0 personal-profile-img" [style.background-image]="_domSanitizer.bypassSecurityTrustStyle('url(' + queja.user.profileImg + ')')">
      </div>
    </div>
    <a href="#" (click)="viewQuejaDetail($event)">
      <div class="card-img-top d-flex flex-wrap justify-content-center align-items-center">
        <span *ngIf="queja.media.length > 3">
          <fa name="ellipsis-h"></fa>
        </span>

        <ng-container *ngFor="let med of queja.media; let i = index">

          <ng-container *ngIf="queja.media.length == 2">
            <img [ngClass]="{'mr-1': i % 2 == 0}" class="mb-1" src="{{med.url}}" width="48%">
          </ng-container>

          <ng-container *ngIf="queja.media.length == 1 || queja.media.length > 2">
            <img *ngIf="i == 0" class="mb-1" src="{{med.url}}" width="100%">
            <img *ngIf="i >= 1 && i <= 2" [ngClass]="{'mr-1': i % 2 != 0}" class="mb-1" src="{{med.url}}" width="48%">
          </ng-container>

        </ng-container>
      </div>
      <div class="card-block text-justify">
        {{queja.detail}}
      </div>
    </a>
    <ul class="list-group list-group-flush pb-0">
      <li class="list-group-item pb-0">
        <comment-form [commentModel]="newComment" (commentResponse)="onCommentResponse($event)"></comment-form>
      </li>
      <li *ngFor="let comment of commentList" class="list-group-item">
        <comment [commentModel]="comment"></comment>
      </li>
    </ul>
    <div *ngIf="pagePattern || firstPattern" class="card-footer text-center">
      <a href="#" (click)="askForMore($event)" class="p-dark-text-color">
        <small *ngIf="pagePattern">Ver respuestas anteriores</small>
        <small *ngIf="!pagePattern && firstPattern">Ocultar respuestas anteriores</small>
      </a>
      <div class="bottom-loader {{ activeClass }} col-12 d-flex justify-content-center align-items-center">
        <img src="/assets/images/forms/preloader.gif" width="50px">
      </div>
    </div>
  </div>
</div>